(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{2047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),n=a(2115),r=a(792);function l(){return"sess_"+Math.random().toString(36).substr(2,9)+Date.now()}function o(){let[e,t]=(0,n.useState)([{id:"welcome",content:"Welcome to Freight Insurance website. How I can help you today?",sender:"bot",timestamp:new Date}]),[a,o]=(0,n.useState)(""),[i,d]=(0,n.useState)(!1),c=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(!c.current){let e=sessionStorage.getItem("sessionId");e||(e=l(),sessionStorage.setItem("sessionId",e)),c.current=e}},[]);let m=async e=>{let t=c.current||l();try{let a=await fetch("https://winwinsols.app.n8n.cloud/webhook/text-recevier",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,sessionId:t})});if(!a.ok)throw Error("API error: ".concat(a.status));let s=await a.json();return(null==s?void 0:s.output)||"Sorry, I didn't get a valid response."}catch(e){return console.error("Error sending to n8n:",e),"Sorry, there was an error processing your request."}},u=async e=>{if(e.preventDefault(),!a.trim()||i)return;let s={id:"user-".concat(Date.now()),content:a,sender:"user",timestamp:new Date};t(e=>[...e,s]),o(""),d(!0);let n=await m(a.trim()),r={id:"bot-".concat(Date.now()),content:n,sender:"bot",timestamp:new Date};t(e=>[...e,r]),d(!1)},x=async()=>{let e={id:"user-".concat(Date.now()),content:"I'd like to get a quote today!",sender:"user",timestamp:new Date};t(t=>[...t,e]),d(!0);let a=await m("I'd like to get a quote today!"),s={id:"bot-".concat(Date.now()),content:a,sender:"bot",timestamp:new Date};t(e=>[...e,s]),d(!1)},h=async()=>{let e={id:"user-".concat(Date.now()),content:"I'd like to make a claim!",sender:"user",timestamp:new Date};t(t=>[...t,e]),d(!0);let a=await m("I'd like to make a claim!"),s={id:"bot-".concat(Date.now()),content:a,sender:"bot",timestamp:new Date};t(e=>[...e,s]),d(!1)};return(0,s.jsx)("div",{className:"flex flex-col h-[calc(100vh-16rem)] max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"bg-blue-600 text-white px-6 py-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"I'm a lovely agent"}),(0,s.jsx)("p",{className:"text-blue-100 text-sm",children:"How can I help you today?"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[e.map(e=>(0,s.jsxs)("div",{className:"mb-6 ".concat("user"===e.sender?"text-right":"text-left"),children:[(0,s.jsx)("div",{className:"inline-block max-w-[80%] rounded-2xl px-6 py-3 chat-content-box ".concat("user"===e.sender?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-800"),children:"bot"===e.sender?(0,s.jsx)("div",{className:"text-left",children:(0,s.jsx)(r.oz,{children:e.content})}):(0,s.jsx)("div",{className:"text-left",children:e.content})}),(0,s.jsx)("div",{className:"text-xs mt-1 text-gray-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id)),i&&(0,s.jsx)("div",{className:"flex justify-start mb-6",children:(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-2xl px-6 py-3",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"h-3 w-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,s.jsx)("div",{className:"h-3 w-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}}),(0,s.jsx)("div",{className:"h-3 w-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"600ms"}})]})})})]}),e.length<=1&&!i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-center my-3",children:(0,s.jsxs)("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 w-45 text-white font-medium py-3 px-6 rounded-lg shadow-md transform transition-transform duration-200 hover:scale-105 flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Get A Quote"]})}),(0,s.jsx)("div",{className:"flex justify-center my-3",children:(0,s.jsxs)("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 w-45 text-white font-medium py-3 px-6 rounded-lg shadow-md transform transition-transform duration-200 hover:scale-105 flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Make a claim"]})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 p-2 bg-gray-50 flex  justify-center space-x-2",children:[(0,s.jsx)("button",{onClick:x,className:"text-sm bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded-md shadow-sm",children:"Get A Quote"}),(0,s.jsx)("button",{onClick:h,className:"text-sm bg-emerald-800 hover:bg-emerald-600 text-white px-3 py-1 rounded-md shadow-sm",children:"Make a claim"})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 p-4 bg-white",children:(0,s.jsxs)("form",{onSubmit:u,className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Send a message...",className:"flex-1 border border-gray-300 rounded-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:i}),(0,s.jsx)("button",{type:"submit",disabled:i||!a.trim(),className:"rounded-full p-4 ".concat(i||!a.trim()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 00-1 1v5H4a1 1 0 100 2h5v5a1 1 0 102 0v-5h5a1 1 0 100-2h-5V4a1 1 0 00-1-1z",clipRule:"evenodd",transform:"rotate(45 10 10)"})})})]})})]})})}},4517:(e,t,a)=>{Promise.resolve().then(a.bind(a,2047))}},e=>{var t=t=>e(e.s=t);e.O(0,[411,441,684,358],()=>t(4517)),_N_E=e.O()}]);